### 代码
##### 自动分配端口号
```python
clientsocket = socket(AF_INET, SOCK_DGRAM)
```
自动分配端口号。 从1024-65535中选，未被其他UDP使用的
##### 手动指定端口号
```python
clientsocket.bind((‘’, 19157))
```
##### 总结
- 周知协议的服务器端：分配一个响应的周知端口号
- 普通应用程序客户端：自动分配端口号
- 普通应用程序服务器端：手动指定一个特定的端口号

### 描述UDP的复用与分解
##### 场景
- 主机A中一个进程的UDP端口：19157
- 主机B中另一进程的UDP端口：464280
- 主机B中可能能够运行多个进程，每个都有自己的UDP套接字及端口号
##### 过程
- 主机A发送一个应用程序数据块给主机B
- 主机A中的**运输层**创建一个**运输层报文段**，报文端中包括：1. 应用程序数据；2. 源端口号(19157)；3. 目的端口号(46428)；4. 两个其他值（暂时忽略）
- **运输层**将该报文段传递到**网络层**
- **网络层**将该报文段封装到一个**IP数据报**中，尽力而为地将报文段交付给接收主机
- 该报文段到达接收主机B，
- **接收主机运输层**检查该报文段中的目的端口号(46428) 并将该报文段交付给端口号46428所标识的套接字（分解）

##### 总结
- 根据上述过程，一个**UDP套接字**是一个**二元组：IP地址和端口号**标识的
- 源不同，但发送的报文段只要目的IP地址和目的端口号相同，就会进入同一个目的进程

##### 源端口号的用途
- A到B发送一条报文段，B需要知道A的IP地址和哪个端口发送的数据，以便进行回复
![[Pasted image 20220103184115.png]]
