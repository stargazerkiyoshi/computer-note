当在代码中看到```this```时，抛开各种应试常问的题目
思考：为什么要在这里使用```this```

### 声明与执行
当写下诸如以下代码时
```javascript
	var a
	function fn() {
	}
```
可以看作是声明
当程序运行到某一个声明，实际并未有任何操作
当程序运行到调用某个函数或者赋值时，就是执行了某个操作

### 其他语言的```this```
在其他面向对象语言java和c++中，```this```很简单，指的是该类自己，```this.xxx```、```this.method()```访问的是自身的属性或方法。然而类只是一个类似于模板的***声明***，具体需要用```new```操作符实例化为一个具体的对象(执行某个操作)，当该对象调用类的方法时(执行某个操作)，若该方法中有用```this```访问属性或方法，其实访问的是该对象的、而不是其他对象的（这句话应该有争议，具体需要验证）
所以在类声明中```this```，是与其实例化后的对象绑定的(动态的)，但反过来在类声明时，也可以认知为```this```指向该类(静态的)

### js的```this```
js中没有类的概念，更没有如何声明类的语法，但也有```this```可以在函数里面使用。
```this```是该函数***被调用***时***动态***绑定的。这是什么意思？
当函数声明(静态地)时
```javascript
	function fn() {
		this.a='xxx'
	}
```
研究```this```几乎是没意义的，因为fn只是个普通函数，它不是一个类，很难表述```this```是什么，你不能说它指向的是fn。
当调用fn时，实际是一个执行的操作，```this```便有了意义，
现在观察```this```到底指向哪里以便找到‘.’语法的上下文
1. 直接调用```fn()```。等价于```window.fn()```，```this```指向的是```window```
2. obj下调用
	```javascript
		var obj = {
			a: ''
			fn: function fn() { this.a='xxx' }
		}
		obj.fn()
	```
	```this```指向的是```obj```
3. new 操作符调用，这是最正常的用法，为了模拟面向对象的写法
	```javascript
		function fn() { this.a='xxx' }
		var obj = new fn()
	```
	```this```指向的是```obj```
	具体new操作执行的过程：
	-  创建一个新的对象
	-  将this指向该对象
	-  执行fn，若fn无返回则返回新创建的对象，若fn有返回则正常返回
4. bind、apply、call显示绑定


### 原理
声明的函数被保存在内存中，赋值给某个变量是引用，当调用该函数时，会有一个运行环境
JavaScript 允许在函数体内部，引用当前环境的其他变量。
由于函数可以在不同的运行环境执行，所以需要有一种机制，能够在函数体内部获得当前的运行环境（context）。所以，`this`就出现了，它的设计目的就是在函数体内部，指代函数当前的运行环境
http://www.ruanyifeng.com/blog/2018/06/javascript-this.html